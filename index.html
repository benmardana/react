<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
  <link rel="stylesheet" href="styles.css">
  <title>React</title>
</head>

<body>
  <div id="root"></div>
</body>

<script>
  const React = (function () {
    return {
      render(component, node) {
        node.appendChild(component);
      },
      createElement(tagName, props = {}, ...children) {
        const newElement = document.createElement(tagName);

        for (propKey of Object.keys(props)) {
          newElement[propKey] = props[propKey];
        }

        for (child of children) {
          newElement.appendChild(child);
        }

        return newElement;
      }
    }
  })();

  const createElement = React.createElement;

  function App() {
    return createElement('div', {},
      Board()
    )
  }

  function Board() {
    return createElement('div', { className: "game" },
      createElement('div', { className: "game-board" },
        createElement('div', { className: "board-row" },
          Square(0),
          Square(1),
          Square(2)
        ),
        createElement('div', { className: "board-row" },
          Square(3),
          Square(4),
          Square(5)
        ),
        createElement('div', { className: "board-row" },
          Square(6),
          Square(7),
          Square(8)
        ),
      )
    )
  }

  function Square(index) {
    let value = null;
    const squareElement = createElement('button', { onclick: onClick });

    function onClick() {
      squareElement.innerText = 'X';
      console.log(`clicked ${index}`);
    }

    return squareElement
  }

  window.onload = function () {
    React.render(App(), document.getElementById('root'));
  };
</script>

</html>
